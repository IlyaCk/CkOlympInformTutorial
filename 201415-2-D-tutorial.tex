\Tutorial	\myflfigaw{\mbox{\raisebox{-30pt}[60pt][0pt]{\begin{mfpic}[12]{0}{19}{0}{8}
\dotted\lines{( 0,0),( 8,0)}
\dotted\lines{( 0,1),( 8,1)}
\dotted\lines{( 0,2),( 8,2)}
\dotted\lines{( 0,3),( 8,3)}
\dotted\lines{( 0,4),( 8,4)}
\dotted\lines{( 0,5),( 8,5)}
\dotted\lines{( 0,6),( 8,6)}
\dotted\lines{( 0,7),( 8,7)}
\dotted\lines{( 0,8),( 8,8)}
\dotted\lines{( 0,0),( 0,8)}
\dotted\lines{( 1,0),( 1,8)}
\dotted\lines{( 2,0),( 2,8)}
\dotted\lines{( 3,0),( 3,8)}
\dotted\lines{( 4,0),( 4,8)}
\dotted\lines{( 5,0),( 5,8)}
\dotted\lines{( 6,0),( 6,8)}
\dotted\lines{( 7,0),( 7,8)}
\dotted\lines{( 8,0),( 8,8)}
%
\lines{(0,4),(3,5)}
\lines{(0,4),(5,3)}
\lines{(0,4),(6,4)}
\lines{(0,4),(7,5)}
\lines{(0,4),(8,8)}
\pen{1mm}
\lines{(0,0),(8,0)}
\lines{(0,0),(0,4)}
\lines{(3,0),(3,5)}
\lines{(5,0),(5,3)}
\lines{(6,0),(6,4)}
\lines{(7,0),(7,5)}
\lines{(8,0),(8,8)}
\end{mfpic}}}}
Введемо поняття \emph{нахил з\nolinebreak[3] \mbox{$j$-го} хмарочосу на \mbox{$k$-й}} (на\nolinebreak[2] рисунку зображені нахили з \mbox{1-го} хмарочоса на інші). Кожен нахил можна подавати у програмі або як кутовий коефіціент 
%$(y_k-y_j)/(x_k-x_j)$, 
$\displaystyle\frac{y_k-y_j}{x_k-x_j}$,
або як вектор $({x_k{-}x_j}; {y_k{-}y_j})$.
(Про переваги використання таких векторів у багатьох геометричних задачах
див.\nolinebreak[1] \verb"https://goo.gl/6yppjy" зокрема і за ключовими словами <<обчислювальна геометрія>> взагалі; але у цій задачі достатньо й кутових коефіціентів, треба лише подавати їх у якнайточнішому типі \verb"extended" (він~же \texttt{long\nolinebreak[3] double}).)

Розглянемо, як порахувати кількість хмарочосів, видимих з\nolinebreak[3] \mbox{1-го}.\linebreak[2] \mbox{2-й}\nolinebreak[3] хмарочос (якщо він взагалі існує, тобто ${N{>}1}$) гарантовано видимий з\nolinebreak[3] \mbox{1-го}. Запам’ятаємо нахил з\nolinebreak[3] \mbox{1-го} хмарочоса на\nolinebreak[3] \mbox{2-й} і оголосимо його \emph{поточним нахилом затулення горизонту}. Потім бігтимемо по решті хмарочосів зліва направо, і\nolinebreak[3] нахил зі все того~ж \mbox{1-го} на кожен наступний виявлятиметься або нижчим-або-рівним, чим нахил поточного затулення горизонту (за\nolinebreak[3] годинниковою стрілкою), або вищим (проти годинникової стрілки). У\nolinebreak[3] першому випадку, поточного хмарочосу не\nolinebreak[3] видно й нічого робити не~треба. У\nolinebreak[3] другому\nolinebreak[3] --- треба додати одиничку на позначення того, що поточний хмарочос видно з\nolinebreak[3] \mbox{1-го}, і оновити нахил поточного затулення горизонту.

Для інших хмарочосів, є ще хмарочоси зліва, які теж треба врахувати. Ускладнення не~принципове, але \emph{як краще} це врахувати?

Писати ще\nolinebreak[3] один аналогічний цикл, який біжить від поточної позиції не~направо, а\nolinebreak[3] наліво\nolinebreak[3] --- спосіб можливий, але \underline{\emph{не}}~найкращий. Зокрема, тому, що с\'{а}ме в таких дублюваннях схожих фрагментів часто з'являються помилки. Особливо, якщо з~першого разу написати неправильно, і~потім в~одному з фрагментів виправити, а в іншому забути або змінити неправильно.

Досить зручний спосіб, який і\nolinebreak[3] дозволяє не~писати зайвого, і\nolinebreak[3] працює дещо швидше за\nolinebreak[2] інші\nolinebreak[3] --- врахувати симетричність видимості (\mbox{$k$-й}\nolinebreak[3] видно з~\mbox{$j$-го} тоді й тільки тоді, коли \mbox{$j$-й}\nolinebreak[3] видно з~\mbox{$k$-го}). Завдяки цьому, коли при розгляді сусідів \mbox{$j$-го} хмарочоса з'ясовано, що з~нього видно\nolinebreak[2] \mbox{$k$-й} (${k{>}j}$), можна додати по\nolinebreak[3] одиничці і~до\nolinebreak[2] кількості видимих з~\mbox{$j$-го}, і~до\nolinebreak[2] кількості видимих з~\mbox{$k$-го}.

Втім, дане пришвидшення (удвічі) не~принципове. А~от намагання розв'язати задачу, взагалі не~звертаючись до поняття нахилу затулення горизонту, а\nolinebreak[3] через три вкладені цикли (два\nolinebreak[3] перебирають, яку пару хмарочосів досліджуємо, і\nolinebreak[3] всередині них третій перебирає усі проміжні між ними, щоб подивитися, чи\nolinebreak[2] не\nolinebreak[3] затуляє) --- погана ідея. Такий розв’язок набиратиме 150--190 балів з~250, а\nolinebreak[3] обробка решти тестів не\nolinebreak[3] поміщається у обмеження часу 2~сек. Конкретне значення у~проміжку 150--190 залежить головним чином від того, чи\nolinebreak[3] обривається третій цикл негайно, як тільки можна встановити результат. 
